<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Bubbles Kitpvp | Home</title>
  <style>
    /* Reset & base styles --------------------------------------------------- */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      font-family: 'Inter', sans-serif;
      background: #0e0e0e;
      color: #fff;
      scroll-behavior: smooth;
    }

    section {
      padding: 100px 20px;
      text-align: center;
    }

    h1, h2, h3 {
      margin-bottom: 20px;
    }

    p {
      color: #ccc;
      line-height: 1.6;
    }

    header {
      background: #0e0e0e;
      border-bottom: 2px solid #007bff;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 10px;
      position: relative;
    }

    .logo {
      position: absolute;
      top: 20px;
      left: 20px;
      height: 60px;
    }

    .login-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      background: transparent;
      border: 1px solid #5865F2;
      color: #5865F2;
      padding: 8px 18px;
      border-radius: 6px;
      font-weight: 600;
      font-size: 0.95em;
      text-decoration: none;
      transition: background 0.3s, color 0.3s, box-shadow 0.3s;
    }

    .login-btn:hover {
      background: #5865F2;
      color: #0e0e0e;
      box-shadow: 0 0 12px rgba(88, 101, 242, 0.7);
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: 30px;
      margin-top: 90px;
      margin-bottom: 20px;
      justify-content: center;
    }

    nav ul li a {
      color: #8ab4f8;
      text-decoration: none;
      font-weight: 600;
      font-size: 1.05em;
      transition: color 0.3s;
    }

    nav ul li a:hover {
      color: #fff;
    }

    .hero {
      background: #121212;
      padding: 100px 20px;
    }

    .hero h1 {
      font-size: 3em;
      margin-bottom: 20px;
    }

    .hero p {
      font-size: 1.2em;
      margin-bottom: 30px;
    }

    .btn {
      display: inline-block;
      background: #007bff;
      color: #fff;
      padding: 12px 25px;
      border-radius: 8px;
      font-weight: bold;
      text-decoration: none;
      transition: background 0.3s, box-shadow 0.3s;
    }

    .btn:hover {
      background: #0056b3;
      box-shadow: 0 0 15px rgba(0, 123, 255, 0.7);
    }

    #reviews {
      background: #121212;
      border-block: 2px solid #007bff;
      padding: 80px 20px;
    }

    #quoteBox {
      font-size: 1.5em;
      max-width: 800px;
      margin: 0 auto;
      color: #8ab4f8;
      text-align: center;
      transition: opacity 0.3s ease-in-out;
      padding: 20px;
    }

    .fade-out {
      opacity: 0 !important;
    }

    #join {
      padding: 100px 20px;
    }

    #discord {
      padding: 100px 20px;
      background: #0e0e0e;
      border-block: 2px solid #007bff;
    }

    #discord h2 {
      font-size: 2.5em;
      margin-bottom: 40px;
      position: relative;
      display: inline-block;
    }

    #discord h2::after {
      content: '';
      display: block;
      width: 100%;
      height: 4px;
      margin-top: 8px;
      background: linear-gradient(to right, #00c6ff, #0072ff);
      border-radius: 2px;
    }

    .discord-box {
      background: #1a1a1a;
      border-radius: 12px;
      max-width: 500px;
      margin: 0 auto;
      padding: 40px 30px;
      box-shadow: 0 0 25px rgba(0, 123, 255, 0.6);
      border: 1px solid #007bff;
      text-align: left;
    }

    .discord-box h3 {
      border-bottom: 2px solid #007bff;
      display: inline-block;
      padding-bottom: 5px;
      margin-bottom: 20px;
    }

    .discord-box ul {
      list-style: none;
      margin-bottom: 20px;
    }

    .discord-box ul li {
      margin-bottom: 10px;
      color: #cfd8dc;
    }

    .discord-box p {
      color: #ccc;
      margin-bottom: 20px;
    }

    .discord-btn {
      display: inline-block;
      background: transparent;
      border: 1px solid #007bff;
      color: #007bff;
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: bold;
      text-decoration: none;
      transition: background 0.3s, color 0.3s, box-shadow 0.3s;
    }

    .discord-btn:hover {
      background: #007bff;
      color: #0e0e0e;
      box-shadow: 0 0 15px rgba(0, 123, 255, 0.7);
    }

    footer {
      background: #0a0a0a;
      padding: 30px 20px;
      color: #777;
      font-size: 0.9em;
      text-align: center;
      border-top: 1px solid #1a1a1a;
    }

    a {
      text-decoration: none;
      color: #8ab4f8;
    }

    a:hover {
      text-decoration: underline;
    }

    button {
      background: #007bff;
      color: #fff;
      border: none;
      padding: 10px 18px;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background: #0056b3;
    }

    @media (max-width: 720px) {
      header {
        padding: 20px 10px;
      }

      .logo {
        height: 50px;
        top: 10px;
        left: 10px;
      }

      .login-btn {
        top: 10px;
        right: 10px;
        padding: 6px 14px;
      }

      nav ul {
        flex-wrap: wrap;
        gap: 15px;
        margin-top: 80px;
      }
    }
  </style>
</head>
<body>
<header>
  <nav>
    <div class="nav-left">
      <img src="logo.png" alt="Server Logo" class="logo" />
    </div>
    <ul>
      <li><a href="#home">Home</a></li>
      <li><a href="#reviews">Reviews</a></li>
      <li><a href="#join">Join</a></li>
      <li><a href="#discord">Discord</a></li>
      <li><a href="#donate">Donate</a></li>
    </ul>
    <div id="discord-login" style="position: absolute; top: 20px; right: 20px;">
      <a href="#" id="login-btn" class="login-btn">Log&nbsp;in&nbsp;with&nbsp;Discord</a>
    </div>
  </nav>
</header>

<section id="home" class="hero">
  <h1>Welcome to Bubbles Kitpvp</h1>
  <p>A Minecraft server focused on community, creativity, and fun.</p>
  <a href="#join" class="btn">Join Now</a>
</section>

<section id="reviews">
  <h2>Player Reviews</h2>
  <div id="quoteBox" class="quote-box">Loading reviews...</div>
</section>

<section id="join">
  <h2>Join the Adventure</h2>
  <p>Server IP: <strong>play.bubblespvp.net</strong></p>
  <p>Port: <strong>19132</strong></p>
  <a href="#discord" class="btn">Join Our Discord</a>
</section>

<section id="discord">
  <h2>Join Our Discord Community</h2>
  <div class="discord-box">
    <h3>Fully Integrated & Reliable Platform</h3>
    <ul>
      <li>âœ“ Meet other Bubbles Kitpvp Members</li>
      <li>âœ“ Real-time Realm chat integration</li>
      <li>âœ“ Instant update notifications</li>
      <li>âœ“ Help shape our growing community</li>
      <li>âœ“ Priority technical support</li>
      <li>âœ“ Exclusive announcement channel</li>
      <li>âœ“ Community showcase opportunities</li>
    </ul>
    <p>&amp; many more benefits!</p>
    <a class="discord-btn" href="https://discord.gg/bubbleskitpvp" target="_blank">ðŸ”— Join Now</a>
    <div class="reconnect">Already a member? <a href="https://discord.gg/bubbleskitpvp">Click to reconnect</a></div>
  </div>
</section>

<footer>
  <p>&copy; 2025 BubblesKitPvp. All rights reserved.</p>
</footer>

<script>
  const quoteBox = document.getElementById("quoteBox");
  let quotes = [];
  let currentQuote = 0;

  async function loadQuotes() {
    try {
      const response = await fetch("quotes.json");
      if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
      quotes = await response.json();
      showNextQuote();
      setInterval(showNextQuote, 4000);
    } catch (error) {
      console.error("Failed to load quotes:", error);
      quoteBox.textContent = "Failed to load reviews.";
    }
  }

  function showNextQuote() {
    if (quotes.length === 0) return;
    quoteBox.classList.add("fade-out");
    setTimeout(() => {
      const [user, quote, rating] = quotes[currentQuote];
      quoteBox.innerHTML = `<q>${quote}</q><div class="source">â€“ ${user} (${rating}/10)</div>`;
      quoteBox.classList.remove("fade-out");
      currentQuote = (currentQuote + 1) % quotes.length;
    }, 500);
  }

  loadQuotes();

  const clientId = "1374928268901220482";
  const redirectUri = "https://bubblestogo.github.io";

  function loginWithDiscord() {
    const authUrl = `https://discord.com/oauth2/authorize?client_id=${clientId}&redirect_uri=${encodeURIComponent(redirectUri)}&response_type=token&scope=identify`;
    window.location.href = authUrl;
  }

  function getTokenFromHash() {
    const match = window.location.hash.match(/access_token=([^&]*)/);
    return match ? match[1] : null;
  }

  async function fetchDiscordUser(token) {
    const res = await fetch("https://discord.com/api/users/@me", {
      headers: { Authorization: `Bearer ${token}` }
    });
    if (!res.ok) throw new Error("Failed to fetch user");
    return await res.json();
  }

  function showUser(user) {
    const discordLoginDiv = document.getElementById("discord-login");
    discordLoginDiv.innerHTML = `
      <div class="user-info" style="display:flex; align-items:center; gap:10px; color:#5865F2; font-weight:600;">
        <img src="https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png" alt="Avatar" style="width:32px; height:32px; border-radius:50%; border: 2px solid #5865F2;" />
        <span>${user.username}#${user.discriminator}</span>
        <button id="logout-btn" style="background:#5865F2; color:#fff; border:none; padding:5px 10px; border-radius:6px; cursor:pointer;">Logout</button>
      </div>
    `;
    document.getElementById("logout-btn").addEventListener("click", () => {
      localStorage.removeItem("discordUser");
      location.reload();
    });
  }

  const token = getTokenFromHash();
  if (token) {
    fetchDiscordUser(token).then(user => {
      localStorage.setItem("discordUser", JSON.stringify(user));
      showUser(user);
      history.replaceState({}, document.title, window.location.pathname);
    }).catch(() => alert("Discord login failed"));
  } else if (localStorage.getItem("discordUser")) {
    showUser(JSON.parse(localStorage.getItem("discordUser")));
  } else {
    document.getElementById("login-btn").addEventListener("click", e => {
      e.preventDefault();
      loginWithDiscord();
    });
  }
</script>
</body>
</html>
